# v1.2.0 - 予約編集機能

**リリース日**: 2025-11-12<br>
**種別**: マイナーリリース

---

## ✨ 新機能

### 📝 `/edit` コマンド

予約を作成した後でも、内容を自由に編集できるようになりました！

---

## 🎯 できること

### 編集可能な項目

- **日付** - 予約の日付を変更
- **開始時刻** - 開始時刻を変更
- **終了時刻** - 終了時刻を変更
- **コメント** - コメントを追加・変更・削除

### 部分的な編集も可能

変更したい項目だけを指定すればOK。他の項目はそのまま維持されます。

**例**:
- コメントだけを変更
- 時刻だけを変更
- 日付だけを変更

---

## 💡 使用例

### コマンド形式

```
/edit reservation_id:予約ID [date:新しい日付] [start_time:新しい開始時刻] [end_time:新しい終了時刻] [comment:新しいコメント]
```

### 実際の使用例

#### 例1: 時刻だけを変更
```
/edit reservation_id:abc123def456 start_time:15:00 end_time:16:00
```

#### 例2: 日付とコメントを変更
```
/edit reservation_id:abc123def456 date:2025-11-15 comment:日程変更しました
```

#### 例3: コメントを削除
```
/edit reservation_id:abc123def456 comment:
```
（空文字を指定するとコメントが削除されます）


## 🛡️ 安全機能

### 重複チェック

編集後の日時が他の予約と重複する場合、エラーメッセージが表示され、編集は実行されません。

**エラー例**:
```
🔴 予約を編集できませんでした

指定された時間は既に予約されています。

既存の予約:
📅 日付: 2025-11-15
👤 予約者: @username
🕐 時間: 14:00 - 16:00
```

### 過去日時のブロック

過去の日時には編集できません。


## 🔔 通知機能

### 編集者への通知

編集を実行したユーザーには、変更内容の詳細が**Ephemeralメッセージ**（本人のみ表示）で送信されます。

**表示内容**:
- 変更前 → 変更後 の比較
- 変更された項目のみ表示

### チャンネルへの公開通知

指定チャンネルには、予約が編集されたことが**公開メッセージ**で通知されます。

**通知内容**:
- 編集者の名前
- 変更された項目と変更内容
- タイムスタンプ


## 🎨 オートコンプリート対応

`/edit` コマンドでも、v1.1.0 で追加されたオートコンプリート機能が利用できます。

- 日付入力時に候補表示
- 時刻入力時に候補表示
- 開始時刻より後の終了時刻のみ表示


## 🔧 権限管理

### 誰が編集できる？

現在のバージョンでは、**予約IDを知っている人なら誰でも編集可能**です。
ただし、予約IDは予測困難なため安心して利用できます。

## 📝 ログ機能

### コマンドログ

編集操作はすべてログに記録されます。

**記録内容**:
- 実行ユーザー
- 予約ID
- 変更内容

## 📚 ドキュメント更新

- **[コマンドリファレンス](../COMMANDS.md)**: `/edit` コマンドの詳細を追加
- **[README.md](../../README.md)**: 主な機能に `/edit` を追加

## ⚠️ 既知の制限事項

- 作成者以外でも編集可能
- 編集履歴は保存されない

## 💡 フィードバック

この機能についてのご意見は `/feedback` コマンドでお送りください！

---

**前のバージョン**: [v1.1.0](v1.1.0.md)<br>
**次のバージョン**: [v1.3.0](v1.3.0.md)

[← リリースノート一覧に戻る](../RELEASE_NOTES.md)
